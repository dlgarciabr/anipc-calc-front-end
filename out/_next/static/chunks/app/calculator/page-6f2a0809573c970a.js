(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[179],{8456:(e,t,n)=>{var i={"./2002":[8062,833],"./2002.ts":[8062,833]};function s(e){if(!n.o(i,e))return Promise.resolve().then(()=>{var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=i[e],s=t[0];return n.e(t[1]).then(()=>n(s))}s.keys=()=>Object.keys(i),s.id=8456,e.exports=s},8528:(e,t,n)=>{Promise.resolve().then(n.bind(n,9460))},9460:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>T});var i=n(7437),s=n(2265);let r=e=>(0,i.jsx)(i.Fragment,{children:e.children});var l=n(7818),a=n(3073),o=n.n(a),c=n(5984),u=n(4792),d=n(2960),p=n(5510),h=n(6548);let m=e=>{let t=(0,d.Z)();return(0,i.jsx)(p.Z,{variant:"progress",steps:e.totalSteps,position:"static",activeStep:e.activeStep,nextButton:(0,i.jsxs)(h.Z,{size:"small",onClick:e.handleNext,disabled:e.activeStep>=e.totalSteps-1,children:["PR\xd3XIMO","rtl"===t.direction?(0,i.jsx)(c.Z,{}):(0,i.jsx)(u.Z,{})]}),backButton:(0,i.jsxs)(h.Z,{size:"small",onClick:e.handleBack,disabled:0===e.activeStep,children:["rtl"===t.direction?(0,i.jsx)(u.Z,{}):(0,i.jsx)(c.Z,{}),"VOLTAR"]})})};var x=n(903);let g=[2002],j=[],v=async(e,t)=>{let i=async()=>(await Promise.all(g.map(async t=>{let i=await n(8456)("./".concat(t)),s=e.getInput(t),r=i.default(s,e);r&&j.push({id:t.toString(),message:r})})),t(j),j.length>0);if(j.length=0,!e||1===e.nextStep)return!1;let s=e.form.Groups[e.nextStep-2];return s.Fields.forEach(t=>{var n;let i=null===(n=e.inputGroups[s.ID])||void 0===n?void 0:n.inputs[t.ID];t.Required&&!i&&j.push({id:t.ID.toString(),message:t.Name+" \xe9 um campo obrigat\xf3rio"}),(t.Required||i&&i.value)&&((i&&t.CustomValue&&!t.Values.some(e=>e===i.value)||!t.Values.length)&&t.Units.length>0&&i&&(!i.unit||"empty"===i.unit)&&j.push({id:"".concat(t.ID,"_un"),message:"Campo obrigat\xf3rio"}),(0===t.Values.length||i&&t.Values.length>0&&t.CustomValue&&!t.Values.some(e=>e===i.value))&&i&&t.Regex&&!new RegExp(t.Regex).test(i.value)&&j.push({id:t.ID.toString(),message:"Campo ".concat(t.Name," inv\xe1lido")}))}),console.log("errors ",j),await i()},Z={nextStep:0,form:{ID:"",Groups:[]},setForm:e=>{console.log(e)},inputGroups:{},setInputGroups:e=>{console.log(e)},getData:()=>({}),setInput:(e,t)=>{console.log(e+t.value)},getInput:e=>{console.log(e)},setNextStep:e=>{console.log(e)},hasErrors:()=>Promise.resolve(!1),errors:[]},I=(0,x.U)((e,t)=>({...Z,setForm:t=>e(e=>({...e,form:t})),setNextStep:t=>e(e=>({...e,nextStep:t})),setInputGroups:t=>e(e=>({...e,inputGroups:Object.fromEntries(t.map(e=>[e.id,e]))})),getData:()=>({ID:t().form.ID,Groups:Object.values(t().inputGroups).map(e=>({ID:e.id,Values:Object.values(e.inputs).map(e=>({ID:e.id,Value:e.value,Unit:e.unit})).filter(e=>!!e.Value)}))}),errors:[],hasErrors:()=>v(t(),t=>e(e=>({...e,errors:t}))),getInput:e=>{let n=[];return Object.values(t().inputGroups).forEach(e=>n.push(...Object.values(e.inputs))),n.find(t=>t.id===e)||{id:e,value:"",unit:""}},setInput:(n,i)=>{let{id:s,value:r,unit:l}=i;return e(e=>{let i=t().getInput(s);if(!i)return e;let a={id:s,value:r,unit:l||i.unit},o=e.inputGroups[n]||{id:n,inputs:{}},c=Object.values(o.inputs).length>0?{...o.inputs,[s]:a}:{[s]:a};return{...e,inputGroups:{...e.inputGroups,[n]:{...o,inputs:c}}}})}}));var f=n(8472);let D=async e=>(await (0,f.Z)({method:"get",url:"https://calc.ghg-impact.eu/form.php?id=".concat(e)})).data,b=async e=>{console.log((await (0,f.Z)({method:"post",url:"https://calc.ghg-impact.eu/calc.php",data:e})).data)};var S=n(9869),C=n(6858),y=n(2434),F=n(8644),N=n(6065),z=n(9217),U=n(5870),G=n(437),k=n(6223),V=n(335),w=n(9621),E=n(511),O=n(8165),R=n(7913),_=n(3657);let q=(0,S.Z)({components:{MuiInputLabel:{styleOverrides:{root:{backgroundColor:"white",padding:"0 10px 0 10px"}}}}}),M=e=>{let{group:t}=e,{setInput:n,getInput:r,errors:l}=I(e=>e),[a,o]=(0,s.useState)(t.Fields),[c,u]=(0,s.useState)([]),d=(e,i)=>{1===e.Units.length?n(t.ID,{id:e.ID,value:i,unit:e.Units[0].Unit}):n(t.ID,{id:e.ID,value:i})},p=e=>{let n=t.Fields.find(t=>t.ID===e);o(a.filter(t=>t.ID!==e)),u([...c,n])},h=e=>{u(c.filter(t=>t.ID!==e.ID)),o([...a,e])},m=(e,s)=>{var r;if(0===e.Units.length)return;let a=e.MultiField?3:4;return 1===e.Units.length?(0,i.jsx)(C.Z,{label:"Unidade",value:e.Units[0].Unit,disabled:!0}):(0,i.jsx)(y.Z,{size:{xs:a,md:a},children:(0,i.jsxs)(F.Z,{error:l.some(t=>t.id==="".concat(e.ID,"_un")),required:e.Required,fullWidth:!0,children:[(0,i.jsx)(N.Z,{id:"combo-unit-".concat(e.ID),children:"Unidade"}),(0,i.jsxs)(z.Z,{labelId:"combo-unit-".concat(e.ID),id:"combo-unit-".concat(e.ID,"-label"),value:s.unit,onChange:i=>n(t.ID,{id:e.ID,value:s.value,unit:i.target.value}),fullWidth:!0,children:[(0,i.jsx)(U.Z,{value:"empty",children:"\xa0"},""),e.Units.map(e=>(0,i.jsx)(U.Z,{value:e.Unit,children:e.Unit},e.Unit))]}),(0,i.jsx)(G.Z,{children:null===(r=l.find(t=>t.id==="".concat(e.ID,"_un")))||void 0===r?void 0:r.message})]})})},x=e=>{var t;let n=r(e.ID);if(!n)return(0,i.jsx)(i.Fragment,{});let s=e.Units.length>0?8:12;return(0,i.jsxs)(y.Z,{size:{xs:12,md:12},container:!0,spacing:1,children:[(0,i.jsx)(y.Z,{size:{xs:s,md:s},children:(0,i.jsx)(k.Z,{title:e.Desc,arrow:!0,children:(0,i.jsx)(C.Z,{fullWidth:!0,label:e.Name,required:e.Required,onChange:t=>d(e,t.target.value),error:l.some(t=>t.id===e.ID.toString()),helperText:null===(t=l.find(t=>t.id===e.ID.toString()))||void 0===t?void 0:t.message})})}),e.Units.length>0?(0,i.jsxs)(i.Fragment,{children:[m(e,n),e.MultiField?(0,i.jsx)(y.Z,{size:{xs:1,md:1},alignContent:"center",children:(0,i.jsx)(V.Z,{"aria-label":"delete",onClick:()=>h(e),title:"Remover",children:(0,i.jsx)(_.Z,{})})}):void 0]}):void 0]})},g=e=>{var s;let a=r(e.ID);if(!a)return(0,i.jsx)(i.Fragment,{});let o=e.Values.map(e=>(0,i.jsx)(U.Z,{value:e,children:e},e));if(e.CustomValue){let e=(0,i.jsx)(U.Z,{value:"other",children:"Outro"},"other");o.push(e)}return(0,i.jsxs)(F.Z,{sx:{minWidth:"50%"},error:l.some(t=>t.id===e.ID.toString()),required:e.Required,children:[(0,i.jsx)(N.Z,{id:"combo-".concat(e.ID),children:e.Name}),(0,i.jsx)(k.Z,{title:e.Desc,arrow:!0,children:(0,i.jsx)(z.Z,{labelId:"combo-".concat(e.ID),id:"combo-".concat(e.ID,"-label"),value:a.value,onChange:i=>n(t.ID,{id:e.ID,value:i.target.value}),fullWidth:!0,children:o})}),(0,i.jsx)(G.Z,{children:null===(s=l.find(t=>t.id===e.ID.toString()))||void 0===s?void 0:s.message})]})},j=e=>{let t=r(e.ID);if(!t)return(0,i.jsx)(i.Fragment,{});let n=t.value,s=!!n&&e.CustomValue&&("other"===n||!e.Values.some(e=>e===n));return e.Values&&e.Values.length&&!s?g(e):x(e)};return(0,i.jsxs)(w.Z,{theme:q,children:[(0,i.jsx)(E.Z,{variant:"h5",component:"h5",style:{margin:"20px 0 20px 0"},children:t.Name}),(0,i.jsxs)(y.Z,{container:!0,children:[t.Desc?(0,i.jsx)(y.Z,{size:{xs:12,md:12},sx:{margin:"10px 0 20px 0"},children:(0,i.jsx)(O.Z,{icon:(0,i.jsx)(R.Z,{fontSize:"inherit"}),severity:"warning",children:t.Desc})}):void 0,t.Fields.some(e=>e.MultiField)?(0,i.jsxs)(i.Fragment,{children:[c.map(e=>(0,i.jsx)(y.Z,{size:{xs:12,md:12},sx:{minHeight:"85px"},children:j(e)},e.ID)),(()=>{let e=[],n=new Set(a.filter(e=>!!e.MultiFieldGroup).map(e=>e.MultiFieldGroup));n.size?Array.from(n).map(e=>({name:e,items:a.filter(t=>t.MultiFieldGroup===e)})).forEach(t=>{e.push((0,i.jsx)(U.Z,{style:{backgroundColor:"#e1dbda"},value:t.name,children:t.name},t.name)),e.push(...t.items.map(e=>(0,i.jsx)(U.Z,{value:e.ID,children:e.Name},e.ID)))}):e=a.map(e=>(0,i.jsx)(U.Z,{value:e.ID,children:e.Name},e.ID));let s=e=>{Array.from(n).some(t=>t===e)||p(Number(e))};return(0,i.jsxs)(F.Z,{fullWidth:!0,children:[(0,i.jsx)(N.Z,{id:"combo-multifield-".concat(t.Name),children:"Escolha ..."}),(0,i.jsx)(z.Z,{labelId:"combo-multifield-".concat(t.Name),id:"combo-multifield-".concat(t.Name,"-label"),value:"",onChange:e=>s(e.target.value),fullWidth:!0,children:e})]})})()]}):t.Fields.map(e=>(0,i.jsx)(y.Z,{size:{xs:12,md:12},sx:{minHeight:"85px"},children:j(e)},e.ID))]})]})};var W=n(2197),B=n(2856);let P=()=>{let{getData:e}=I(e=>e);return(0,i.jsxs)(y.Z,{container:!0,spacing:2,style:{height:"780px"},children:[(0,i.jsxs)(y.Z,{size:{xs:12,md:12},container:!0,alignContent:"center",justifyContent:"center",flexDirection:"column",style:{textAlign:"center"},children:[(0,i.jsx)(E.Z,{gutterBottom:!0,variant:"h5",component:"div",children:"Preenchimento conclu\xeddo"}),(0,i.jsx)(E.Z,{variant:"body2",sx:{color:"text.secondary"},children:"Iremos agora efectuar os c\xe1lculos e gerar os resultados."})]}),(0,i.jsx)(y.Z,{size:{xs:12,md:12},container:!0,justifyContent:"center",alignContent:"flex-start",children:(0,i.jsx)(h.Z,{variant:"contained",endIcon:(0,i.jsx)(B.Z,{}),onClick:()=>{b(e())},size:"large",children:"Calcular"})})]})};var A=n(1573);let H=e=>{let{onBegin:t}=e;return(0,i.jsxs)(y.Z,{container:!0,spacing:2,style:{height:"780px"},children:[(0,i.jsxs)(y.Z,{size:{xs:12,md:12},container:!0,alignContent:"center",justifyContent:"center",children:[(0,i.jsx)(E.Z,{gutterBottom:!0,variant:"h5",component:"div",children:"Calculadora de pegada de carbono"}),(0,i.jsx)(E.Z,{variant:"body2",sx:{color:"text.secondary"},children:"Este c\xe1lculo – confidencial e sem custos para os participantes – \xe9 orientado pelo INEGI e pelo SerQ e ir\xe1 mostrar quais s\xe3o as principais amea\xe7as e oportunidades de melhoria do setor e onde \xe9 mais produtivo atuar, com vista \xe0 descarboniza\xe7\xe3o."})]}),(0,i.jsx)(y.Z,{size:{xs:12,md:12},container:!0,justifyContent:"center",alignContent:"flex-start",children:(0,i.jsx)(h.Z,{variant:"contained",endIcon:(0,i.jsx)(A.Z,{}),onClick:()=>{t()},size:"large",children:"Iniciar"})})]})},L=()=>{let[e,t]=s.useState({initialStep:0,nextStep:()=>{},previousStep:()=>{}}),[n,l]=s.useState(0),{setNextStep:a,setForm:c,form:u,hasErrors:d}=I(e=>e),p=async()=>{let t=n+1;a(t),await d()||(l(t),e.nextStep())},h=(0,s.useCallback)(async()=>{c(await D("anipc"))},[c]);(0,s.useEffect)(()=>{h()},[h]);let x=()=>u?u.Groups.map(e=>(0,i.jsx)(r,{children:(0,i.jsx)(M,{group:e})},e.ID)):[],g=()=>[(0,i.jsx)(H,{onBegin:p},"initialStep"),...x(),(0,i.jsx)(P,{},"finalStep")];return u?(0,i.jsx)(W.Z,{maxWidth:"md",children:(0,i.jsxs)(y.Z,{container:!0,children:[(0,i.jsx)(y.Z,{size:{xs:12,md:12},sx:{minHeight:"780px"},children:(0,i.jsx)(o(),{instance:n=>t({...e,...n}),children:g()})}),(0,i.jsx)(y.Z,{size:{xs:12,md:12},children:(0,i.jsx)(m,{activeStep:n,handleBack:()=>{let t=n-1;a(t),l(t),e.previousStep()},handleNext:p,totalSteps:g().length})})]})}):(0,i.jsx)(i.Fragment,{children:"loading"})},T=(0,l.default)(()=>Promise.resolve(L),{ssr:!1})}},e=>{var t=t=>e(e.s=t);e.O(0,[468,130,215,744],()=>t(8528)),_N_E=e.O()}]);