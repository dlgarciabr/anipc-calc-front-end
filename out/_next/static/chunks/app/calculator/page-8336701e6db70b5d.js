(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[179],{8456:(e,t,i)=>{var s={"./2002":[8062,833],"./2002.ts":[8062,833]};function n(e){if(!i.o(s,e))return Promise.resolve().then(()=>{var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=s[e],n=t[0];return i.e(t[1]).then(()=>i(n))}n.keys=()=>Object.keys(s),n.id=8456,e.exports=n},8528:(e,t,i)=>{Promise.resolve().then(i.bind(i,2242))},2242:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>q});var s=i(7437),n=i(2265);let l=e=>(0,s.jsx)(s.Fragment,{children:e.children});var a=i(7818),r=i(3073),o=i.n(r),u=i(5984),d=i(4792),c=i(2960),h=i(5510),p=i(6548);let m=e=>{let t=(0,c.Z)();return(0,s.jsx)(h.Z,{variant:"progress",steps:e.totalSteps,position:"static",activeStep:e.activeStep,nextButton:(0,s.jsxs)(p.Z,{size:"small",onClick:e.handleNext,disabled:e.activeStep>=e.totalSteps-1,children:["PR\xd3XIMO","rtl"===t.direction?(0,s.jsx)(u.Z,{}):(0,s.jsx)(d.Z,{})]}),backButton:(0,s.jsxs)(p.Z,{size:"small",onClick:e.handleBack,disabled:0===e.activeStep,children:["rtl"===t.direction?(0,s.jsx)(d.Z,{}):(0,s.jsx)(u.Z,{}),"VOLTAR"]})})};var x=i(903);let g=[2002],v=[],j=async(e,t)=>{let s=async()=>(await Promise.all(g.map(async t=>{let s=await i(8456)("./".concat(t)),n=e.getInput(t),l=s.default(n,e);l&&v.push({id:t.toString(),message:l})})),t(v),v.length>0);if(v.length=0,!e)return!1;let n=e.form.Groups[e.nextStep-1];return n.Fields.forEach(t=>{var i;let s=null===(i=e.inputGroups[n.ID])||void 0===i?void 0:i.inputs[t.ID];t.Required&&!s&&v.push({id:t.ID.toString(),message:t.Name+" \xe9 um campo obrigat\xf3rio"}),(s&&t.CustomValue&&!t.Values.some(e=>e===s.value)||!t.Values.length)&&t.Units.length>0&&s&&!s.unit&&v.push({id:"".concat(t.ID,"_un"),message:"Campo obrigat\xf3rio"}),(0===t.Values.length||s&&t.Values.length>0&&t.CustomValue&&!t.Values.some(e=>e===s.value))&&s&&t.Regex&&!new RegExp(t.Regex).test(s.value)&&v.push({id:t.ID.toString(),message:"Campo ".concat(t.Name," inv\xe1lido")})}),await s()},I={nextStep:0,form:{ID:"",Groups:[]},setForm:e=>{console.log(e)},inputGroups:{},setInputGroups:e=>{console.log(e)},getData:()=>({}),setInput:(e,t)=>{console.log(e+t.value)},getInput:e=>{console.log(e)},setNextStep:e=>{console.log(e)},hasErrors:()=>Promise.resolve(!1),errors:[]},D=(0,x.U)((e,t)=>({...I,setForm:t=>e(e=>({...e,form:t})),setNextStep:t=>e(e=>({...e,nextStep:t})),setInputGroups:t=>e(e=>({...e,inputGroups:Object.fromEntries(t.map(e=>[e.id,e]))})),getData:()=>({ID:t().form.ID,Groups:Object.values(t().inputGroups).map(e=>({ID:e.id,Values:Object.values(e.inputs).map(e=>({ID:e.id,Value:e.value,Unit:e.unit}))}))}),errors:[],hasErrors:()=>j(t(),t=>e(e=>({...e,errors:t}))),getInput:e=>{let i=[];return Object.values(t().inputGroups).forEach(e=>i.push(...Object.values(e.inputs))),i.find(t=>t.id===e)||{id:e,value:"",unit:""}},setInput:(i,s)=>{let{id:n,value:l,unit:a}=s;return e(e=>{let s=t().getInput(n);if(!s)return e;let r={id:n,value:l,unit:a||s.unit},o=e.inputGroups[i]||{id:i,inputs:{}},u=Object.values(o.inputs).length>0?{...o.inputs,[n]:r}:{[n]:r};return{...e,inputGroups:{...e.inputGroups,[i]:{...o,inputs:u}}}})}}));var Z=i(8472);let f=async e=>(await (0,Z.Z)({method:"get",url:"https://calc.ghg-impact.eu/form.php?id=".concat(e)})).data,b=async e=>{console.log(e),console.log((await (0,Z.Z)({method:"post",url:"https://calc.ghg-impact.eu/calc.php",data:e})).data)};var S=i(2434),C=i(6858),F=i(8644),N=i(6065),V=i(8076),O=i(5870),k=i(437),G=i(335),z=i(511),E=i(8165),w=i(7913),U=i(3657);let _=e=>{let{group:t}=e,{setInput:i,getInput:l,errors:a}=D(e=>e),[r,o]=(0,n.useState)(t.Fields),[u,d]=(0,n.useState)([]),c=e=>{let i=t.Fields.find(t=>t.ID===e);o(r.filter(t=>t.ID!==e)),d([...u,i])},h=e=>{d(u.filter(t=>t.ID!==e.ID)),o([...r,e])},p=e=>{var n,r;let o=l(e.ID);if(!o)return(0,s.jsx)(s.Fragment,{});let u=o.value,d=e.Units.length>0?8:12,c=e.MultiField?3:4;return(0,s.jsxs)(S.Z,{size:{xs:12,md:12},container:!0,spacing:1,children:[(0,s.jsx)(S.Z,{size:{xs:d,md:d},children:(0,s.jsx)(C.Z,{fullWidth:!0,label:e.Name,required:e.Required,onChange:s=>i(t.ID,{id:e.ID,value:s.target.value}),error:a.some(t=>t.id===e.ID.toString()),helperText:null===(n=a.find(t=>t.id===e.ID.toString()))||void 0===n?void 0:n.message})}),e.Units.length>0?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(S.Z,{size:{xs:c,md:c},children:(0,s.jsxs)(F.Z,{error:a.some(t=>t.id==="".concat(e.ID,"_un")),required:e.Required,fullWidth:!0,children:[(0,s.jsx)(N.Z,{id:"combo-unit-".concat(e.ID),children:"Unidade"}),(0,s.jsx)(V.Z,{labelId:"combo-unit-".concat(e.ID),id:"combo-unit-".concat(e.ID,"-label"),value:o.unit,onChange:s=>i(t.ID,{id:e.ID,value:u,unit:s.target.value}),fullWidth:!0,children:e.Units.map(e=>(0,s.jsx)(O.Z,{value:e.Unit,children:e.Unit},e.Unit))}),(0,s.jsx)(k.Z,{children:null===(r=a.find(t=>t.id==="".concat(e.ID,"_un")))||void 0===r?void 0:r.message})]})}),e.MultiField?(0,s.jsx)(S.Z,{size:{xs:1,md:1},alignContent:"center",children:(0,s.jsx)(G.Z,{"aria-label":"delete",onClick:()=>h(e),title:"Remover",children:(0,s.jsx)(U.Z,{})})}):void 0]}):void 0]})},m=e=>{var n;let r=l(e.ID);if(!r)return(0,s.jsx)(s.Fragment,{});let o=e.Values.map(e=>(0,s.jsx)(O.Z,{value:e,children:e},e));if(e.CustomValue){let e=(0,s.jsx)(O.Z,{value:"other",children:"Outro"},"other");o.push(e)}return(0,s.jsxs)(F.Z,{sx:{minWidth:150},error:a.some(t=>t.id===e.ID.toString()),required:e.Required,children:[(0,s.jsx)(N.Z,{id:"combo-".concat(e.ID),children:e.Name}),(0,s.jsx)(V.Z,{labelId:"combo-".concat(e.ID),id:"combo-".concat(e.ID,"-label"),value:r.value,onChange:s=>i(t.ID,{id:e.ID,value:s.target.value}),fullWidth:!0,children:o}),(0,s.jsx)(k.Z,{children:null===(n=a.find(t=>t.id===e.ID.toString()))||void 0===n?void 0:n.message})]})},x=e=>{let t=l(e.ID);if(!t)return(0,s.jsx)(s.Fragment,{});let i=t.value,n=!!i&&e.CustomValue&&("other"===i||!e.Values.some(e=>e===i));return e.Values&&e.Values.length&&!n?m(e):p(e)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(z.Z,{variant:"h4",component:"h4",children:t.Name}),(0,s.jsxs)(S.Z,{container:!0,children:[t.Desc?(0,s.jsx)(S.Z,{size:{xs:12,md:12},sx:{margin:"10px 0 20px 0"},children:(0,s.jsx)(E.Z,{icon:(0,s.jsx)(w.Z,{fontSize:"inherit"}),severity:"warning",children:t.Desc})}):void 0,t.Fields.some(e=>e.MultiField)?(0,s.jsxs)(s.Fragment,{children:[u.map(e=>(0,s.jsx)(S.Z,{size:{xs:12,md:12},sx:{minHeight:"80px"},children:x(e)},e.ID)),(()=>{let e=r.map(e=>(0,s.jsx)(O.Z,{value:e.ID,children:e.Name},e.ID));return(0,s.jsxs)(F.Z,{fullWidth:!0,children:[(0,s.jsx)(N.Z,{id:"combo-multifield-".concat(t.Name),children:"Esolha ..."}),(0,s.jsx)(V.Z,{labelId:"combo-multifield-".concat(t.Name),id:"combo-multifield-".concat(t.Name,"-label"),value:"",onChange:e=>c(Number(e.target.value)),fullWidth:!0,children:e})]})})()]}):t.Fields.map(e=>(0,s.jsx)(S.Z,{size:{xs:12,md:12},sx:{minHeight:"80px"},children:x(e)},e.ID))]})]})};var y=i(2197);let R=()=>{let{getData:e}=D(e=>e);return(0,s.jsx)(S.Z,{container:!0,spacing:2,children:(0,s.jsxs)(S.Z,{size:{xs:6,md:6},children:["Step final",(0,s.jsx)("a",{href:"#",onClick:()=>{b(e())},children:"Send data"})]})})},W=()=>{let[e,t]=n.useState({initialStep:0,nextStep:()=>{},previousStep:()=>{}}),[i,a]=n.useState(0),{setNextStep:r,setForm:u,form:d,hasErrors:c}=D(e=>e),h=async()=>{let t=i+1;r(t),await c()||(a(t),e.nextStep())},p=(0,n.useCallback)(async()=>{u(await f("anipc"))},[u]);(0,n.useEffect)(()=>{p()},[p]);let x=()=>d?d.Groups.map(e=>(0,s.jsx)(l,{children:(0,s.jsx)(_,{group:e})},e.ID)):[],g=()=>[...x(),(0,s.jsx)(R,{},"finalStep")];return d?(0,s.jsx)(y.Z,{maxWidth:"md",children:(0,s.jsxs)(S.Z,{container:!0,children:[(0,s.jsx)(S.Z,{size:{xs:12,md:12},sx:{minHeight:"700px"},children:(0,s.jsx)(o(),{instance:i=>t({...e,...i}),children:g()})}),(0,s.jsx)(S.Z,{size:{xs:12,md:12},children:(0,s.jsx)(m,{activeStep:i,handleBack:()=>{let t=i-1;r(t),a(t),e.previousStep()},handleNext:h,totalSteps:g().length})})]})}):(0,s.jsx)(s.Fragment,{children:"loading"})},q=(0,a.default)(()=>Promise.resolve(W),{ssr:!1})}},e=>{var t=t=>e(e.s=t);e.O(0,[644,130,215,744],()=>t(8528)),_N_E=e.O()}]);