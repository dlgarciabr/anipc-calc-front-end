(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[609],{75589:(e,l,t)=>{Promise.resolve().then(t.bind(t,52916))},52916:(e,l,t)=>{"use strict";t.r(l),t.d(l,{default:()=>G});var i=t(57437),r=t(2265),n=t(92434),s=t(80511),a=t(14595),o=t(89869),c=t(61096),d=t(80824),x=t(66124),u=t(23269),h=t(98784),m=t(76548),j=t(89621),p=t(62197),Z=t(88929),g=t(31655),v=t(57818),b=t(7610),y=t(98530),f=t(5322),z=t(4504),V=t(12514),C=t(37578),T=t(11276),w=t(56007),N=t(16463),A=t(57603),k=t(79134),I=t(27316),L=t(28027),E=t(99163),R=t(24881);let B=(e,l)=>new A.Z(e).toFixed(l).replaceAll(".",","),D=e=>{let{group:l}=e,t=(0,E.U)(),r=(0,R.YD)();if(!t||!t.identifier||void 0===t.identifier.dataIndex||!r)return null;let n=(null==r?void 0:r.pointerType)==="mouse",a=n?0:40-r.height;return(0,i.jsx)(k.Z,{children:(0,i.jsx)(I.Z,{sx:{pointerEvents:"none",zIndex:e=>e.zIndex.modal},open:!0,placement:n?"top-end":"top",anchorEl:function(e){if(null===e)return{getBoundingClientRect:()=>({width:0,height:0,x:0,y:0,top:0,right:0,bottom:0,left:0,toJSON:()=>""})};let{x:l,y:t}=e,i={width:0,height:0,x:l,y:t,top:t,right:l,bottom:t,left:l};return{getBoundingClientRect:()=>({...i,toJSON:()=>JSON.stringify(i)})}}(r),modifiers:[{name:"offset",options:{offset:[0,a]}}],children:(0,i.jsx)(L.Z,{elevation:0,sx:{m:1,p:1.5,border:"solid",borderWidth:2,borderColor:"divider"},children:(0,i.jsxs)(Z.Z,{direction:"row",alignItems:"center",children:[(0,i.jsx)("div",{style:{width:11,height:11,borderRadius:"50%",backgroundColor:t.color}}),(0,i.jsx)(s.Z,{sx:{ml:2},color:"secondary",fontWeight:"light",children:l.Values[t.identifier.dataIndex].Title}),(0,i.jsx)(s.Z,{sx:{ml:2,color:"black"},children:null===t.value?"":B(t.value,2)})]})})})})};var U=t(87070),O=t(93324),_=t(20016),F=t(29482),P=t(69024);let S=()=>{(0,F.g)(!0);let{form:e,result:l,setRouterParam:t,getData:v}=(0,w.P)(e=>e),[k,I]=r.useState(!1),[L,E]=r.useState(!1),R=r.useId();e.ID&&l||(0,N.redirect)("calculator");let B="#".concat(e.Colors[0]),S="#".concat(e.Colors[1]),G=async()=>{E(!0);try{let e=await (0,P.r8)(v()),l=window.URL.createObjectURL(e.content),t=document.createElement("a");t.href=l,t.setAttribute("download",e.name),document.body.appendChild(t),t.click()}catch(e){console.log("error",e)}E(!1)},W=(e,l)=>{let t=Number(e);return isNaN(t)?e:J(t,l)},J=(e,l)=>new A.Z(e).toFixed(l).replaceAll(".",","),K=(e,l)=>{let t=e.slice(0,2).reduce((e,l)=>{let{Value:t}=l;return e+Number(t)},0);return 100*Number(e[l].Value)/t},M=(e,l)=>{let t=e.some(e=>"blank"===e.Type);return e.map((e,r)=>(0,i.jsx)(n.Z,{container:!0,size:{xs:12,md:t?12:6},alignItems:"start",children:Y(e,l)},r))},Y=(e,l)=>e.Values.map(e=>{let t=e.Unit?"".concat(e.Value," ").concat(e.Unit):e.Value;return l&&(t=e.Unit?"".concat(W(e.Value,2)," ").concat(e.Unit):W(e.Value,2)),(0,i.jsxs)(r.Fragment,{children:[(0,i.jsx)(n.Z,{size:{xs:6,md:6},style:{textAlign:"left"},children:(0,i.jsx)(s.Z,{variant:"body1",color:"secondary",children:e.Title})}),(0,i.jsx)(n.Z,{size:{xs:6,md:6},style:{textAlign:"left"},children:(0,i.jsx)(s.Z,{variant:"body1",color:"secondary",children:t})})]},e.Title)}),q=e=>(0,i.jsx)(n.Z,{container:!0,size:{xs:12,md:12},style:{margin:"30px 0 30px 0"},children:e.map(e=>"graph:bars"===e.Type?Q(e):"graph:circular"===e.Type?H(e):void 0)}),H=e=>(0,i.jsxs)(n.Z,{container:!0,size:{xs:12,md:6},children:[(0,i.jsx)(n.Z,{size:{xs:12,md:12},children:(0,i.jsx)(s.Z,{variant:"h6",children:e.Title})}),(0,i.jsx)(n.Z,{size:{xs:12,md:12},justifyItems:"center",children:(0,i.jsx)(b.u,{width:270,height:320,colors:[B,S],series:[{data:[{id:0,value:K(e.Values,0),label:e.Values[0].Title},{id:1,value:K(e.Values,1),label:e.Values[1].Title}],innerRadius:50,outerRadius:100,paddingAngle:5,cornerRadius:5,startAngle:0,cx:130,cy:130,valueFormatter:e=>null===e?"":"".concat(J(e.value,2),"%")}],slotProps:{legend:{direction:"column",position:{vertical:"bottom",horizontal:"middle"},padding:0}}})})]},e.Title),Q=e=>{let l="".concat(R,"-clip-path");return(0,i.jsxs)(n.Z,{container:!0,size:{xs:12,md:6},sx:{marginTop:{xs:"20px",md:"0"}},children:[(0,i.jsx)(n.Z,{size:{xs:12,md:12},children:(0,i.jsx)(s.Z,{variant:"h6",children:e.Title})}),(0,i.jsx)(n.Z,{size:{xs:12,md:12},children:(0,i.jsxs)(y.D,{height:300,dataset:[{shortLabel:e.Values[0].Label,value:Number(e.Values[0].Value)},{shortLabel:e.Values[1].Label,value:Number(e.Values[1].Value)},{shortLabel:e.Values[2].Label,value:Number(e.Values[2].Value)},{shortLabel:e.Values[3].Label,value:Number(e.Values[3].Value)}],series:[{type:"bar",dataKey:"value"}],xAxis:[{scaleType:"band",dataKey:"shortLabel",colorMap:{type:"ordinal",colors:["#".concat(e.Values[0].Color),"#".concat(e.Values[1].Color),"#".concat(e.Values[2].Color),"#".concat(e.Values[3].Color)]}}],children:[(0,i.jsx)(f.h,{id:l}),(0,i.jsx)("g",{clipPath:"url(#".concat(l,")"),children:(0,i.jsx)(z.E,{})}),(0,i.jsx)(V.U,{}),(0,i.jsx)(C.N,{}),(0,i.jsx)(D,{group:e})]})})]},e.Title)},X=(0,o.Z)((0,T.W)(B,S));return(0,i.jsxs)(j.Z,{theme:X,defaultMode:"light",children:[(0,i.jsxs)(p.Z,{maxWidth:"lg",children:[(0,i.jsx)(n.Z,{container:!0,spacing:2,justifyContent:"center",children:(0,i.jsx)(n.Z,{children:(0,i.jsx)(s.Z,{gutterBottom:!0,variant:"h5",component:"div",color:"primary",children:(0,i.jsx)("strong",{children:l.Title})})})}),(0,i.jsx)(n.Z,{container:!0,spacing:2,children:(0,i.jsx)(Z.Z,{direction:"row",width:"100%",textAlign:"center",spacing:2,children:(0,i.jsxs)(n.Z,{container:!0,size:{xs:12,md:12},children:[l.Reports.map((e,l)=>{if(0===e.Groups.length)return null;let t=e.Groups[0],r=2===e.Groups.length?e.Groups[1]:void 0;return(0,i.jsxs)(n.Z,{container:!0,size:{xs:12,md:12},children:[(0,i.jsxs)(n.Z,{size:{xs:12,md:12},children:[(0,i.jsx)(n.Z,{size:{xs:12,md:12},style:{textAlign:"left",marginTop:"20px"},children:(0,i.jsx)(s.Z,{variant:"h5",children:e.Title})}),(0,i.jsx)(n.Z,{size:{xs:12,md:12},children:(0,i.jsx)(a.Z,{style:{marginBottom:"15px"}})}),e.Desc?e.Desc.map((e,l)=>(0,i.jsx)(n.Z,{size:{xs:12,md:12},style:{textAlign:"left",marginBottom:"20px"},children:(0,i.jsx)(s.Z,{variant:"caption",color:"secondary",children:e})},l)):null]}),M(t,0!=l),r?q(r):null]},e.Title)}),(e=>(0,i.jsx)(n.Z,{container:!0,size:{xs:12,md:12},style:{marginBottom:"20px"},children:(0,i.jsxs)(n.Z,{size:{xs:12,md:12},children:[(0,i.jsx)(n.Z,{size:{xs:12,md:12},style:{textAlign:"left"},children:(0,i.jsx)(s.Z,{variant:"h5",children:e.Title})}),(0,i.jsx)(n.Z,{size:{xs:12,md:12},children:(0,i.jsx)(a.Z,{style:{marginBottom:"15px"}})}),e.Desc?e.Desc.map((e,l)=>(0,i.jsx)(n.Z,{size:{xs:12,md:12},style:{textAlign:"left"},children:""===e?(0,i.jsx)(s.Z,{variant:"caption",color:"secondary",children:"\xa0"}):(0,i.jsx)(s.Z,{variant:"caption",color:"secondary",children:e})},l)):null]})},e.Title))(l.Reports[3])]})})}),(0,i.jsxs)(n.Z,{size:{xs:12,md:12},container:!0,justifyContent:"space-evenly",alignContent:"flex-start",sx:{marginBottom:"50px"},children:[(0,i.jsx)(g.Z,{title:"Voltar e editar a simula\xe7\xe3o atual",arrow:!0,children:(0,i.jsx)(m.Z,{variant:"outlined",endIcon:(0,i.jsx)(U.Z,{}),onClick:()=>{t("edit"),(0,N.redirect)("calculator")},size:"large",children:"voltar"})}),(0,i.jsx)(g.Z,{title:"Exportar simula\xe7\xe3o para Excel",arrow:!0,children:(0,i.jsx)(m.Z,{variant:"contained",endIcon:(0,i.jsx)(O.Z,{}),size:"large",component:"label",onClick:G,loading:L,children:"Excel"})}),(0,i.jsx)(g.Z,{title:"Iniciar o preenchimento de uma nova simula\xe7\xe3o",arrow:!0,children:(0,i.jsx)(m.Z,{variant:"outlined",endIcon:(0,i.jsx)(_.Z,{}),onClick:()=>I(!0),size:"large",children:"Nova"})})]})]}),(0,i.jsxs)(c.Z,{open:k,onClose:()=>I(!1),"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,i.jsx)(d.Z,{id:"alert-dialog-title",children:(0,i.jsx)(s.Z,{color:"secondary",children:"Deseja preencher uma nova simula\xe7\xe3o?"})}),(0,i.jsx)(x.Z,{children:(0,i.jsx)(u.Z,{id:"alert-dialog-description",children:"Ao continuar as informa\xe7\xf5es previamente preenchidas ser\xe3o perdidas."})}),(0,i.jsxs)(h.Z,{children:[(0,i.jsx)(m.Z,{onClick:()=>I(!1),children:"Cancelar"}),(0,i.jsx)(m.Z,{onClick:()=>{t("new"),(0,N.redirect)("calculator")},autoFocus:!0,children:"Continuar"})]})]})]})},G=(0,v.default)(()=>Promise.resolve(S),{ssr:!1})}},e=>{var l=l=>e(e.s=l);e.O(0,[334,939,36,130,215,744],()=>l(75589)),_N_E=e.O()}]);