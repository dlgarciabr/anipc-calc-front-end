(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[609],{94863:(e,t,l)=>{Promise.resolve().then(l.bind(l,52916))},52916:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>G});var i=l(57437),r=l(2265),n=l(92434),s=l(80511),a=l(14595),o=l(89869),c=l(61096),d=l(80824),x=l(66124),u=l(23269),h=l(98784),m=l(76548),j=l(89621),p=l(62197),Z=l(88929),g=l(31655),b=l(57818),v=l(7610),y=l(98530),f=l(5322),z=l(4504),V=l(12514),C=l(37578),w=l(11276),T=l(56007),N=l(16463),k=l(57603),A=l(79134),I=l(27316),L=l(28027),E=l(99163),R=l(24881);let D=(e,t)=>new k.Z(e).toFixed(t).replaceAll(".",","),U=e=>{let{group:t}=e,l=(0,E.U)(),r=(0,R.YD)();if(!l||!l.identifier||void 0===l.identifier.dataIndex||!r)return null;let n=(null==r?void 0:r.pointerType)==="mouse",a=n?0:40-r.height;return(0,i.jsx)(A.Z,{children:(0,i.jsx)(I.Z,{sx:{pointerEvents:"none",zIndex:e=>e.zIndex.modal},open:!0,placement:n?"top-end":"top",anchorEl:function(e){if(null===e)return{getBoundingClientRect:()=>({width:0,height:0,x:0,y:0,top:0,right:0,bottom:0,left:0,toJSON:()=>""})};let{x:t,y:l}=e,i={width:0,height:0,x:t,y:l,top:l,right:t,bottom:l,left:t};return{getBoundingClientRect:()=>({...i,toJSON:()=>JSON.stringify(i)})}}(r),modifiers:[{name:"offset",options:{offset:[0,a]}}],children:(0,i.jsx)(L.Z,{elevation:0,sx:{m:1,p:1.5,border:"solid",borderWidth:2,borderColor:"divider"},children:(0,i.jsxs)(Z.Z,{direction:"row",alignItems:"center",children:[(0,i.jsx)("div",{style:{width:11,height:11,borderRadius:"50%",backgroundColor:l.color}}),(0,i.jsx)(s.Z,{sx:{ml:2},color:"secondary",fontWeight:"light",children:t.Values[l.identifier.dataIndex].Title}),(0,i.jsx)(s.Z,{sx:{ml:2,color:"black"},children:null===l.value?"":D(l.value,2)})]})})})})};var B=l(87070),F=l(15013),O=l(93324),P=l(20016),S=l(29482),W=l(69024);let _=()=>{(0,S.g)(!0);let{form:e,result:t,setRouterParam:l,getData:b}=(0,T.P)(e=>e),[A,I]=r.useState(!1),[L,E]=r.useState(!1),[R,D]=r.useState(!1),_=r.useId();e.ID&&t||(0,N.redirect)("calculator");let G="#".concat(e.Colors[0]),J="#".concat(e.Colors[1]),K=async()=>{E(!0);try{let e=await (0,W.r8)(b()),t=window.URL.createObjectURL(e.content),l=document.createElement("a");l.href=t,l.setAttribute("download",e.name),document.body.appendChild(l),l.click()}catch(e){console.log("error",e)}E(!1)},M=async()=>{D(!0);try{let e=await (0,W.WW)(b()),t=window.URL.createObjectURL(e.content),l=document.createElement("a");l.href=t,l.setAttribute("download",e.name),document.body.appendChild(l),l.click()}catch(e){console.log("error",e)}D(!1)},Y=(e,t)=>{let l=Number(e);return isNaN(l)?e:q(l,t)},q=(e,t)=>new k.Z(e).toFixed(t).replaceAll(".",","),H=(e,t)=>{let l=e.slice(0,2).reduce((e,t)=>{let{Value:l}=t;return e+Number(l)},0);return 100*Number(e[t].Value)/l},Q=(e,t)=>{let l=e.some(e=>"blank"===e.Type);return e.map((e,r)=>(0,i.jsx)(n.Z,{container:!0,size:{xs:12,md:l?12:6},alignItems:"start",children:X(e,t)},r))},X=(e,t)=>e.Values.map(e=>{let l=e.Unit?"".concat(e.Value," ").concat(e.Unit):e.Value;return t&&(l=e.Unit?"".concat(Y(e.Value,2)," ").concat(e.Unit):Y(e.Value,2)),(0,i.jsxs)(r.Fragment,{children:[(0,i.jsx)(n.Z,{size:{xs:6,md:6},style:{textAlign:"left"},children:(0,i.jsx)(s.Z,{variant:"body1",color:"secondary",children:e.Title})}),(0,i.jsx)(n.Z,{size:{xs:6,md:6},style:{textAlign:"left"},children:(0,i.jsx)(s.Z,{variant:"body1",color:"secondary",children:l})})]},e.Title)}),$=e=>(0,i.jsx)(n.Z,{container:!0,size:{xs:12,md:12},style:{margin:"30px 0 30px 0"},children:e.map(e=>"graph:bars"===e.Type?et(e):"graph:circular"===e.Type?ee(e):void 0)}),ee=e=>(0,i.jsxs)(n.Z,{container:!0,size:{xs:12,md:6},children:[(0,i.jsx)(n.Z,{size:{xs:12,md:12},children:(0,i.jsx)(s.Z,{variant:"h6",children:e.Title})}),(0,i.jsx)(n.Z,{size:{xs:12,md:12},justifyItems:"center",children:(0,i.jsx)(v.u,{width:270,height:320,colors:[G,J],series:[{data:[{id:0,value:H(e.Values,0),label:e.Values[0].Title},{id:1,value:H(e.Values,1),label:e.Values[1].Title}],innerRadius:50,outerRadius:100,paddingAngle:5,cornerRadius:5,startAngle:0,cx:130,cy:130,valueFormatter:e=>null===e?"":q(e.value,2)}],slotProps:{legend:{direction:"column",position:{vertical:"bottom",horizontal:"middle"},padding:0}}})})]},e.Title),et=e=>{let t="".concat(_,"-clip-path");return(0,i.jsxs)(n.Z,{container:!0,size:{xs:12,md:6},sx:{marginTop:{xs:"20px",md:"0"}},children:[(0,i.jsx)(n.Z,{size:{xs:12,md:12},children:(0,i.jsx)(s.Z,{variant:"h6",children:e.Title})}),(0,i.jsx)(n.Z,{size:{xs:12,md:12},children:(0,i.jsxs)(y.D,{height:300,dataset:[{shortLabel:e.Values[0].Label,value:Number(e.Values[0].Value)},{shortLabel:e.Values[1].Label,value:Number(e.Values[1].Value)},{shortLabel:e.Values[2].Label,value:Number(e.Values[2].Value)},{shortLabel:e.Values[3].Label,value:Number(e.Values[3].Value)}],series:[{type:"bar",dataKey:"value"}],xAxis:[{scaleType:"band",dataKey:"shortLabel",colorMap:{type:"ordinal",colors:["#".concat(e.Values[0].Color),"#".concat(e.Values[1].Color),"#".concat(e.Values[2].Color),"#".concat(e.Values[3].Color)]}}],children:[(0,i.jsx)(f.h,{id:t}),(0,i.jsx)("g",{clipPath:"url(#".concat(t,")"),children:(0,i.jsx)(z.E,{})}),(0,i.jsx)(V.U,{}),(0,i.jsx)(C.N,{}),(0,i.jsx)(U,{group:e})]})})]},e.Title)},el=(0,o.Z)((0,w.W)(G,J));return(0,i.jsxs)(j.Z,{theme:el,defaultMode:"light",children:[(0,i.jsxs)(p.Z,{maxWidth:"lg",children:[(0,i.jsx)(n.Z,{container:!0,spacing:2,justifyContent:"center",children:(0,i.jsx)(n.Z,{children:(0,i.jsx)(s.Z,{gutterBottom:!0,variant:"h5",component:"div",color:"primary",children:(0,i.jsx)("strong",{children:t.Title})})})}),(0,i.jsx)(n.Z,{container:!0,spacing:2,children:(0,i.jsx)(Z.Z,{direction:"row",width:"100%",textAlign:"center",spacing:2,children:(0,i.jsxs)(n.Z,{container:!0,size:{xs:12,md:12},children:[t.Reports.map((e,t)=>{if(0===e.Groups.length)return null;let l=e.Groups[0],r=2===e.Groups.length?e.Groups[1]:void 0;return(0,i.jsxs)(n.Z,{container:!0,size:{xs:12,md:12},children:[(0,i.jsxs)(n.Z,{size:{xs:12,md:12},children:[(0,i.jsx)(n.Z,{size:{xs:12,md:12},style:{textAlign:"left",marginTop:"20px"},children:(0,i.jsx)(s.Z,{variant:"h5",children:e.Title})}),(0,i.jsx)(n.Z,{size:{xs:12,md:12},children:(0,i.jsx)(a.Z,{style:{marginBottom:"15px"}})}),e.Desc?e.Desc.map((e,t)=>(0,i.jsx)(n.Z,{size:{xs:12,md:12},style:{textAlign:"left",marginBottom:"20px"},children:(0,i.jsx)(s.Z,{variant:"caption",color:"secondary",children:e})},t)):null]}),Q(l,0!=t),r?$(r):null]},e.Title)}),(e=>(0,i.jsx)(n.Z,{container:!0,size:{xs:12,md:12},style:{marginBottom:"20px"},children:(0,i.jsxs)(n.Z,{size:{xs:12,md:12},children:[(0,i.jsx)(n.Z,{size:{xs:12,md:12},style:{textAlign:"left"},children:(0,i.jsx)(s.Z,{variant:"h5",children:e.Title})}),(0,i.jsx)(n.Z,{size:{xs:12,md:12},children:(0,i.jsx)(a.Z,{style:{marginBottom:"15px"}})}),e.Desc?e.Desc.map((e,t)=>(0,i.jsx)(n.Z,{size:{xs:12,md:12},style:{textAlign:"left"},children:""===e?(0,i.jsx)(s.Z,{variant:"caption",color:"secondary",children:"\xa0"}):(0,i.jsx)(s.Z,{variant:"caption",color:"secondary",children:e})},t)):null]})},e.Title))(t.Reports[3])]})})}),(0,i.jsxs)(n.Z,{size:{xs:12,md:12},container:!0,justifyContent:"space-evenly",alignContent:"flex-start",sx:{marginBottom:"50px"},children:[(0,i.jsx)(g.Z,{title:"Voltar e editar a simula\xe7\xe3o atual",arrow:!0,children:(0,i.jsx)(m.Z,{variant:"outlined",endIcon:(0,i.jsx)(B.Z,{}),onClick:()=>{l("edit"),(0,N.redirect)("calculator")},size:"large",children:"voltar"})}),(0,i.jsx)(g.Z,{title:"Exportar simula\xe7\xe3o para Excel",arrow:!0,children:(0,i.jsx)(m.Z,{variant:"contained",endIcon:(0,i.jsx)(O.Z,{}),size:"large",component:"label",onClick:K,loading:L,children:"Excel"})}),(0,i.jsx)(g.Z,{title:"Exportar simula\xe7\xe3o para PDF",arrow:!0,children:(0,i.jsx)(m.Z,{variant:"contained",endIcon:(0,i.jsx)(F.Z,{}),size:"large",component:"label",onClick:M,loading:R,children:"PDF"})}),(0,i.jsx)(g.Z,{title:"Iniciar o preenchimento de uma nova simula\xe7\xe3o",arrow:!0,children:(0,i.jsx)(m.Z,{variant:"outlined",endIcon:(0,i.jsx)(P.Z,{}),onClick:()=>I(!0),size:"large",children:"Nova"})})]})]}),(0,i.jsxs)(c.Z,{open:A,onClose:()=>I(!1),"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,i.jsx)(d.Z,{id:"alert-dialog-title",children:(0,i.jsx)(s.Z,{color:"secondary",children:"Deseja preencher uma nova simula\xe7\xe3o?"})}),(0,i.jsx)(x.Z,{children:(0,i.jsx)(u.Z,{id:"alert-dialog-description",children:"Ao continuar as informa\xe7\xf5es previamente preenchidas ser\xe3o perdidas."})}),(0,i.jsxs)(h.Z,{children:[(0,i.jsx)(m.Z,{onClick:()=>I(!1),children:"Cancelar"}),(0,i.jsx)(m.Z,{onClick:()=>{l("new"),(0,N.redirect)("calculator")},autoFocus:!0,children:"Continuar"})]})]})]})},G=(0,b.default)(()=>Promise.resolve(_),{ssr:!1})}},e=>{var t=t=>e(e.s=t);e.O(0,[334,55,36,130,215,744],()=>t(94863)),_N_E=e.O()}]);