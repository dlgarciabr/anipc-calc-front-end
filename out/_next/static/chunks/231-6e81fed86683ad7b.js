(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[231],{3664:(e,t,r)=>{var o={"./2001":[55754,754],"./2001.ts":[55754,754],"./2002":[56343,343],"./2002.ts":[56343,343],"./2004":[96025,25],"./2004.ts":[96025,25]};function n(e){if(!r.o(o,e))return Promise.resolve().then(()=>{var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=o[e],n=t[0];return r.e(t[1]).then(()=>r(n))}n.keys=()=>Object.keys(o),n.id=3664,e.exports=n},21156:(e,t,r)=>{"use strict";r.d(t,{k:()=>s});var o=r(12115),n=r(53784),a=r(94703);let s=function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Are you sure want to leave this page?";(0,a.A)(e,t),(0,o.useEffect)(()=>{let r=()=>{if(e&&!window.confirm(t))throw"Route Canceled"};return n.default.events.on("beforeHistoryChange",r),()=>{n.default.events.off("beforeHistoryChange",r)}},[e,t])}},25471:(e,t,r)=>{"use strict";r.d(t,{d:()=>n});var o=r(48350);let n=(e,t)=>({palette:{primary:{main:e},secondary:{main:t},background:{default:"#ffffff",paper:"#f5f5f5"}},typography:{allVariants:{color:e}},components:{MuiInputLabel:{styleOverrides:{root:{backgroundColor:"white",padding:"0 10px 0 10px",color:t,["&.".concat(o.A.focused)]:{color:t}}}},MuiOutlinedInput:{styleOverrides:{notchedOutline:{borderColor:e,"&:hover":{borderColor:"red"}}}},MuiButton:{styleOverrides:{outlined:{color:t}}},MuiMenuItem:{styleOverrides:{root:{color:t}}}}})},34503:(e,t,r)=>{"use strict";r.d(t,{Li:()=>o,h7:()=>a,su:()=>n});let o=e=>{if(e instanceof Map){let t={};for(let[r,n]of e)t[String(r)]=o(n);return t}if(Array.isArray(e))return e.map(e=>o(e));if(null!==e&&"object"==typeof e){let t={};for(let[r,n]of Object.entries(e))t[r]=o(n);return t}return e},n=e=>{let t=o(e),r=document.createElement("a");r.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(JSON.stringify(t))),r.setAttribute("download","calculadora.json"),r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r)},a=async e=>{var t;if(!(null===(t=e.target.files)||void 0===t?void 0:t.length))return{};let r=e.target.files[0];if("application/json"!=r.type)return{errorMessage:"Ficheiro inv\xe1lido"};let o=new Map,n=await new Response(r).json();return Object.keys(n).forEach(e=>{let t=n[parseInt(e)],r={id:t.id,name:t.name,inputs:new Map};Object.keys(t.inputs).forEach(e=>{let o=t.inputs[parseInt(e)],n={id:o.id,value:o.value,unit:o.unit,name:o.name||"",customValue:o.customValue};r.inputs.set(parseInt(e),n)}),o.set(r.id,r)}),{data:o}}},41226:()=>{},52282:(e,t,r)=>{"use strict";r.d(t,{i:()=>i});var o=r(65453);let n=[2001,2002,2004],a=[],s=async(e,t)=>{let o=async()=>(await Promise.all(n.map(async t=>{let o=await r(3664)("./".concat(t)),n=e.getInput(t),s=o.default(n,e);s&&a.push({id:t.toString(),message:s})})),t(a),a.length>0);if(a.length=0,!e||1===e.nextStep)return!1;let s=e.form.Groups[e.nextStep-2];return s.Fields.forEach(t=>{var r;if(!1===t.CustomValue&&1===t.Values.length)return;let o=null===(r=e.inputGroups.get(s.ID))||void 0===r?void 0:r.inputs.get(t.ID);t.Required&&!o&&a.push({id:t.ID.toString(),message:t.Name+" \xe9 um campo obrigat\xf3rio"}),(t.Required||o&&o.value)&&((o&&t.CustomValue&&!t.Values.some(e=>e===o.value)||!t.Values.length)&&t.Units.length>0&&o&&(!o.unit||"empty"===o.unit)&&a.push({id:"".concat(t.ID,"_un"),message:"Campo obrigat\xf3rio"}),(0===t.Values.length||o&&t.Values.length>0&&t.CustomValue&&!t.Values.some(e=>e===o.value))&&o&&t.Regex&&!new RegExp(t.Regex).test(o.value)&&a.push({id:t.ID.toString(),message:"Campo ".concat(t.Name," inv\xe1lido")}))}),await o()};var u=r(34503);let l={routerParam:"",nextStep:0,totalSteps:0,form:{ID:"",Groups:[],Title:"",Colors:[],Desc:"",Disclaimer:""},setForm:e=>{console.log(e)},inputGroups:new Map,setInputGroups:e=>{console.log(e)},getData:()=>({}),setInput:(e,t)=>{console.log(e+t.value)},getInput:e=>{console.log(e)},deleteInput:(e,t)=>{console.log(e+t)},setNextStep:e=>{console.log(e)},hasErrors:()=>Promise.resolve(!1),errors:[],result:void 0,setResult:e=>{console.log(e)},setRouterParam:e=>{console.log(e)}},i=(0,o.v)((e,t)=>({...l,setForm:t=>e(e=>{let r=new Map;return t.Groups.forEach(e=>{e.Fields.forEach(t=>{let o=1===t.Values.length,n=r.get(e.ID);n||(n={id:e.ID,name:e.Name,inputs:new Map}),o&&n.inputs.set(t.ID,{id:t.ID,value:t.Values[0],name:t.Name}),r.set(e.ID,n)})}),{...e,form:t,inputGroups:r,totalSteps:t.Groups.length+2}}),setInputGroups:t=>e(e=>({...e,inputGroups:t})),setNextStep:t=>e(e=>({...e,nextStep:t})),getData:()=>({ID:t().form.ID,Groups:Array.from(t().inputGroups.values()).map(e=>({ID:e.id,Values:Array.from(e.inputs.values()).map(e=>({ID:e.id,Value:e.value,Unit:e.unit})).filter(e=>!!e.Value)})),FormData:(0,u.Li)(t().inputGroups)}),errors:[],hasErrors:()=>s(t(),t=>e(e=>({...e,errors:t}))),getInput:e=>{let r=[];Array.from(t().inputGroups.values()).forEach(e=>r.push(...Array.from(e.inputs.values())));let o=r.find(t=>t.id===e);return o||{id:e,value:"",unit:"",name:""}},deleteInput:(t,r)=>e(e=>{if(!r)return e;let o=e.inputGroups.get(t);return o?(o.inputs.delete(r),{...e,inputGroups:e.inputGroups.set(t,o)}):e}),setInput:(r,o)=>{let{id:n,value:a,unit:s,customValue:u,name:l}=o;return e(e=>{let o=t().getInput(n);if(!o)return e;let i={id:n,value:a,unit:s||o.unit,customValue:void 0!=u?u:o.customValue,name:l},p=e.inputGroups.get(r)||{id:r,name:"",inputs:new Map};return p.inputs.set(n,i),{...e,inputGroups:e.inputGroups.set(r,p)}})},setResult:t=>e(e=>({...e,result:t})),setRouterParam:t=>e(e=>({...e,routerParam:t}))}))},97402:(e,t,r)=>{"use strict";r.d(t,{OE:()=>u,Rs:()=>a,Vb:()=>s});var o=r(23464);let n="https://calc.ghg-impact.eu",a=async(e,t)=>{let r="".concat(n,"/form.php?id=").concat(e);return t&&(o.A.defaults.headers.common={token_login:t}),(await (0,o.A)({method:"get",url:r})).data},s=async e=>(await (0,o.A)({method:"post",url:"".concat(n,"/calc.php"),data:e})).data,u=async e=>{let t=await (0,o.A)({method:"post",url:"".concat(n,"/export.php"),data:e,responseType:"blob"});return{name:t.headers["content-disposition"].match(/filename="([^"]+)"/)[1],content:t.data}}}}]);